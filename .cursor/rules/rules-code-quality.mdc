# コード品質必須ルール

## 🚫 絶対禁止事項

### 絶対禁止
- **any型の使用**（サーバー側を除く）
- **未使用変数・関数の放置**
- **型定義なしの関数**
- **インポート順序の不統一**
- **未処理のPromise**
- **型安全性の無視**

## 🔧 必須実装事項

### 必須型定義
- **関数の引数と戻り値**: 型を明示必須
- **変数の型**: 明示的型定義必須
- **オブジェクトプロパティ**: 型定義必須
- **配列要素**: 要素型明示必須

### 必須型安全性
- **厳密な型チェック**: TypeScript厳密モード必須
- **null/undefinedチェック**: 適切な型ガード必須
- **型アサーション**: 最小限の使用必須
- **型インポート**: `import type`の使用必須

### 必須コード品質
- **一貫したコーディングスタイル**: Prettier自動フォーマット必須
- **自動インポートソート**: simple-import-sort必須
- **ブラウザ互換性チェック**: compatプラグイン必須
- **アクセシビリティチェック**: jsx-a11y必須

## 📊 必須品質基準

### 型安全性基準
- **型定義カバレッジ**: 100%必須
- **any型使用率**: 0%必須（サーバー側を除く）
- **未使用変数**: 0件必須
- **型エラー**: 0件必須

### コード品質基準
- **ESLintエラー**: 0件必須
- **ESLint警告**: 最小限必須
- **重複コード**: 5%以下必須
- **循環的複雑度**: 10以下必須

### セキュリティ基準
- **セキュリティ脆弱性**: 0件必須
- **SQLインジェクション**: 対策必須
- **XSS脆弱性**: 対策必須
- **CSRF脆弱性**: 対策必須

### パフォーマンス基準
- **バンドルサイズ**: 適切な範囲内必須
- **レンダリング性能**: 60fps維持必須
- **メモリリーク**: 0件必須
- **CPU使用率**: 適切な範囲内必須

## 🛠️ 必須ツール設定

### ESLint必須設定
```javascript
// 必須ルール
"@typescript-eslint/consistent-type-imports": "warn",
"@typescript-eslint/no-floating-promises": "error",
"@typescript-eslint/no-unused-vars": "error",
"@typescript-eslint/no-explicit-any": "warn",
"react-hooks/rules-of-hooks": "error",
"react-hooks/exhaustive-deps": "warn",
"simple-import-sort/imports": "error",
"simple-import-sort/exports": "error",
"compat/compat": "warn"
```

### TypeScript必須設定
```json
{
  "strict": true,
  "exactOptionalPropertyTypes": true,
  "noUncheckedIndexedAccess": true,
  "useUnknownInCatchVariables": true,
  "verbatimModuleSyntax": true
}
```

### Prettier必須設定
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": false,
  "printWidth": 80,
  "tabWidth": 2
}
```

## 🔄 必須チェックフロー

### 開発時チェック
1. **IDE連携**: リアルタイム型チェック必須
2. **保存時**: 自動フォーマット実行必須
3. **手動チェック**: `npm run lint`実行必須

### コミット前チェック
1. **型チェック**: TypeScriptエラー0件必須
2. **品質チェック**: ESLintエラー0件必須
3. **フォーマット**: Prettier違反0件必須
4. **セキュリティ**: 脆弱性0件必須

### プルリクエスト時チェック
1. **CI/CD**: 自動チェック実行必須
2. **コードレビュー**: 品質基準確認必須
3. **セキュリティスキャン**: 脆弱性チェック必須
4. **パフォーマンステスト**: 性能確認必須

## 📋 必須品質メトリクス

### 日次監視項目
- **ESLintエラー数**: 0件維持必須
- **TypeScriptエラー数**: 0件維持必須
- **型カバレッジ**: 100%維持必須
- **セキュリティ脆弱性**: 0件維持必須

### 週次監視項目
- **コード複雑度**: 適切な範囲維持必須
- **重複コード率**: 5%以下維持必須
- **テストカバレッジ**: 80%以上維持必須
- **パフォーマンス指標**: 基準値維持必須

### 月次監視項目
- **技術的負債**: 適切な管理必須
- **依存関係**: 最新版維持必須
- **セキュリティパッチ**: 適用必須
- **品質向上**: 継続的改善必須

## ⚠️ 例外条件

### 一時的例外
- **実験的機能**: 開発ブランチでの一時的例外
- **緊急修正**: セキュリティ修正時の一時的例外
- **外部API制約**: 外部制約による一時的例外

### 恒久的例外
- **サーバー側any型**: レガシーシステム連携時
- **設定ファイル**: 環境固有設定時
- **テストファイル**: テスト用の型緩和時

## 🚨 品質劣化時の対応

### 自動対応
- **フォーマット違反**: Prettier自動修正
- **インポート順序**: simple-import-sort自動修正
- **未使用インポート**: ESLint自動削除

### 手動対応
- **型エラー**: 開発者による手動修正必須
- **セキュリティ問題**: 即座の修正必須
- **パフォーマンス問題**: 優先的な修正必須

### 緊急対応
- **重大セキュリティ問題**: 24時間以内修正必須
- **システム停止**: 即座の修正必須
- **データ損失リスク**: 緊急修正必須

## 📊 品質改善プロセス

### 継続的改善
- **週次品質レビュー**: チーム内共有必須
- **月次改善計画**: 具体的な改善策実施必須
- **四半期見直し**: ツール・設定最適化必須

### 品質向上施策
- **教育・研修**: チーム内知識共有必須
- **ベストプラクティス**: 継続的な更新必須
- **ツール活用**: 新機能の積極的導入必須

## 🎯 品質目標

### 短期目標（3ヶ月）
- **型エラー0件**: 完全達成必須
- **ESLintエラー0件**: 完全達成必須
- **セキュリティ脆弱性0件**: 完全達成必須

### 中期目標（6ヶ月）
- **テストカバレッジ90%**: 達成必須
- **パフォーマンス最適化**: 20%向上必須
- **開発効率向上**: 30%向上必須

### 長期目標（1年）
- **技術的負債50%削減**: 達成必須
- **品質自動化100%**: 達成必須
- **チーム品質意識向上**: 継続的改善必須