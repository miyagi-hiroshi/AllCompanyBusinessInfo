---
description: アーキテクチャレイヤー分離
globs: ["server/**/*.ts", "client/**/*.ts"]
alwaysApply: true
---

システムは3層アーキテクチャで責務を分離：

## 🖥️ クライアント層
- **技術スタック**: React SPA + Wouter Router + TanStack Query + Shadcn/ui + Tailwind CSS
- **責務**: UI表示、ユーザーインタラクション、状態管理、API呼び出し
- **実装範囲**: コンポーネント、フック、ページ、ユーティリティ関数

## 🌐 API Gateway層
- **技術スタック**: Express.js Server + 認証ミドルウェア + セッション管理 + Zodバリデーション
- **責務**: HTTPリクエスト処理、認証・認可、バリデーション、エラーハンドリング、ビジネスロジック
- **実装範囲**: ルート、ミドルウェア、サービス、バリデーション

## 🗄️ データベース層
- **技術スタック**: PostgreSQL + Drizzle ORM + 接続プーリング + 型安全クエリ
- **責務**: データ永続化、クエリ最適化、データ整合性、型安全なデータアクセス
- **実装範囲**: リポジトリ、スキーマ、マイグレーション、クエリ

各層は明確に分離され、HTTP/HTTPS REST APIで通信