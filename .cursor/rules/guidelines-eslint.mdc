# ESLint利用ガイドライン

## 🛠️ 設定推奨事項

### type-aware ESLintの活用
- **推奨設定**: `typescript.configs.recommendedTypeChecked`の使用
- **プロジェクト設定**: `tsconfig.eslint.json`による型情報活用
- **パフォーマンス**: 型解決の最適化による高速化
- **精度向上**: 型情報を活用した高精度なチェック

### 環境別設定の使い分け
- **クライアント**: React/Hooks/A11yルール重視
- **サーバー**: Node.js環境最適化、any型許可
- **共有**: 共通ルールの統一適用
- **設定ファイル**: 環境別の適切な分離

### プラグインの適切な利用
- **必須プラグイン**: typescript-eslint, react, react-hooks
- **推奨プラグイン**: jsx-a11y, import, simple-import-sort
- **品質向上**: sonarjs, unicorn, promise
- **互換性**: compat（browserslist連携）

### ルールレベルの調整
- **error**: 絶対に修正が必要な問題
- **warn**: 改善推奨だが継続可能
- **off**: プロジェクト固有で無効化

## 📋 運用推奨事項

### 開発時のリアルタイムチェック
- **IDE連携**: VSCode + ESLint拡張機能の活用
- **保存時チェック**: 自動的な問題検出
- **インライン表示**: エラー・警告の即座表示
- **自動修正**: 修正可能な問題の自動解決

### コミット前の自動チェック
- **Husky + lint-staged**: ステージングファイルのみチェック
- **段階的実行**: 型チェック → ESLint → フォーマット
- **エラー時停止**: 問題がある場合はコミット拒否
- **自動修正**: 修正可能な問題の自動解決

### 定期実行での品質確認
- **日次実行**: `npm run lint`での全体チェック
- **週次分析**: エラー傾向の分析・改善
- **月次見直し**: ルール設定の最適化
- **継続改善**: 品質向上のための継続的取り組み

### チーム内ルール統一
- **設定共有**: 統一されたeslint.config.jsの共有
- **教育・研修**: ルール理解の徹底
- **ベストプラクティス**: 継続的な知識共有
- **フィードバック**: ルール改善の提案・反映

## 🔧 カスタマイズ推奨事項

### プロジェクト固有ルールの追加
- **ドメイン固有**: ビジネスロジック特有のルール
- **アーキテクチャ固有**: システム設計に応じたルール
- **チーム固有**: 開発チームの慣習に応じたルール
- **段階的導入**: 新ルールの段階的な適用

### 環境別ルールの調整
- **クライアント側**: ブラウザ環境最適化
- **サーバー側**: Node.js環境最適化
- **テスト環境**: テスト用の緩和設定
- **CI/CD環境**: 自動化に適した設定

### プラグインの選択基準
- **必要性**: プロジェクトに必要な機能か
- **パフォーマンス**: 実行速度への影響
- **メンテナンス**: 継続的な更新・サポート
- **学習コスト**: チーム習得の難易度

### ルール設定の最適化
- **バランス**: 厳しさと開発効率のバランス
- **段階的適用**: 新ルールの段階的導入
- **フィードバック**: 開発者からの意見反映
- **継続的改善**: 定期的な設定見直し

## 📊 推奨ルール設定

### TypeScript強化ルール
```javascript
// 型安全性強化
"@typescript-eslint/consistent-type-imports": "warn",
"@typescript-eslint/no-floating-promises": "error",
"@typescript-eslint/no-misused-promises": "error",
"@typescript-eslint/no-unused-vars": "error",
"@typescript-eslint/no-explicit-any": "warn",
"@typescript-eslint/no-non-null-assertion": "warn"
```

### React/Hooksルール
```javascript
// React最適化
"react-hooks/rules-of-hooks": "error",
"react-hooks/exhaustive-deps": "warn",
"react/jsx-key": "error",
"react/jsx-no-target-blank": "error",
"react/self-closing-comp": "error",
"react/jsx-no-useless-fragment": "warn"
```

### インポート管理ルール
```javascript
// インポート最適化
"simple-import-sort/imports": "error",
"simple-import-sort/exports": "error",
"import/no-duplicates": "error",
"import/order": "off"
```

### コード品質ルール
```javascript
// 品質向上
"sonarjs/no-all-duplicated-branches": "warn",
"unicorn/prefer-query-selector": "warn",
"unicorn/filename-case": ["warn", { "case": "kebabCase" }],
"promise/no-return-wrap": "error"
```

### ブラウザ互換性ルール
```javascript
// 互換性チェック
"compat/compat": "warn"
```

## 🎯 環境別設定例

### クライアント側設定
```javascript
{
  files: ["client/**/*.{ts,tsx}"],
  rules: {
    // React/Hooks重視
    "react-hooks/exhaustive-deps": "warn",
    "jsx-a11y/alt-text": "error",
    
    // ブラウザ互換性
    "compat/compat": "warn",
    
    // 型安全性
    "@typescript-eslint/no-explicit-any": "error"
  }
}
```

### サーバー側設定
```javascript
{
  files: ["server/**/*.ts"],
  rules: {
    // サーバー側緩和
    "no-console": "off",
    "@typescript-eslint/no-explicit-any": "off",
    "compat/compat": "off",
    
    // Node.js最適化
    "unicorn/prefer-node-protocol": "warn"
  }
}
```

## 📋 トラブルシューティング

### よくある問題と解決策

#### パフォーマンス問題
- **原因**: 大量ファイルでの型チェック
- **解決**: tsconfig.eslint.jsonの最適化
- **対策**: skipLibCheck: trueの設定

#### ルール競合
- **原因**: 複数プラグインのルール競合
- **解決**: ルールの優先順位設定
- **対策**: 明示的なルール無効化

#### 型情報エラー
- **原因**: tsconfig.eslint.jsonの設定不備
- **解決**: 適切なproject設定
- **対策**: 型情報の整合性確認

#### 自動修正失敗
- **原因**: 複雑なコード構造
- **解決**: 手動修正の実施
- **対策**: 段階的な修正実行

## 🔄 継続的改善

### 定期的な設定見直し
- **月次レビュー**: ルール設定の効果確認
- **四半期見直し**: 新機能・プラグインの検討
- **年次更新**: ESLint・プラグインのバージョンアップ

### チームフィードバックの活用
- **開発者アンケート**: ルール設定への意見収集
- **問題報告**: 運用上の問題点の共有
- **改善提案**: 新しいルール・設定の提案

### 品質指標の監視
- **エラー傾向**: 頻出エラーパターンの分析
- **修正時間**: エラー修正にかかる時間
- **開発効率**: ESLint導入前後の比較

### ベストプラクティスの共有
- **社内共有**: 成功事例の横展開
- **外部発信**: コミュニティへの知見共有
- **継続学習**: 最新情報のキャッチアップ