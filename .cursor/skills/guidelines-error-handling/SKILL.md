---
name: guidelines-error-handling
description: エラーハンドリング推奨事項（try-catch設計、ログレベル使い分け、Error Boundary、HTTPステータスコード拡張）。エラー処理・ログ・バリデーション設計時に使用
---

# エラーハンドリング推奨事項

## 🔧 基本原則

### 非同期処理

- **try-catch**: 適切なエラーハンドリングを実装
- **エラー再スロー**: 必要に応じてエラーを再スロー

### ログ出力

- **スタックトレース**: エラー発生時はスタックトレースをログに残す
- **ログレベル**: 以下の使い分けを推奨
  - **ERROR**: システムエラー、例外発生時
  - **WARN**: 警告、異常だが処理継続可能
  - **INFO**: 重要な処理の開始・終了
  - **DEBUG**: デバッグ情報（本番環境では出力しない）

### ユーザー表示

- **分かりやすいメッセージ**: ユーザーに分かりやすいエラーメッセージを表示

## 🎯 フロントエンド

### 推奨エラーハンドリング戦略

- **エラー境界**: React Error Boundaryの適切な活用
- **フォールバックUI**: エラー時の代替表示の提供
- **エラー回復**: ユーザーによる操作継続の支援
- **エラー監視**: エラー発生状況の追跡と分析

## 🔒 バリデーション

### 推奨バリデーション戦略

- **エラー分類**: バリデーションエラーとビジネスロジックエラーの明確な分離
- **エラーメッセージ**: ユーザーに分かりやすいエラーメッセージの提供
- **エラー回復**: ユーザーが修正可能なエラーの適切な処理

## 🌐 HTTPステータスコード推奨パターン

### 推奨ステータスコード

- **202 Accepted**: 非同期処理の開始
- **204 No Content**: 成功だが返却データなし
- **409 Conflict**: リソースの競合
- **422 Unprocessable Entity**: バリデーションエラー
- **429 Too Many Requests**: レート制限

## 📝 ログ推奨パターン

### 推奨ログ運用

- **ログ分析**: ログパターンの分析とアラート設定
- **ログ保持**: 適切なログ保持期間の設定
- **ログバックアップ**: ログのバックアップ戦略
- **ログ可視化**: ダッシュボードでのログ可視化
