# 受発注見込み入力・角度B案件入力画面での新規データ入力プロンプト

## 目的

受発注見込み入力画面または角度B案件入力画面で、利用者から提供されたプレーンテキストデータを基に、ブラウザから新規データを入力する。

## 対象画面

このプロンプトは以下の2つの画面で使用可能です：

1. **受発注見込み入力画面** - ページタイトル: 「受発注見込み入力」
2. **角度B案件入力画面** - ページタイトル: 「角度B案件登録」

### 画面の判定方法

- **ページタイトルを確認**: ブラウザのタブまたはページ内の見出しで「受発注見込み入力」または「角度B案件登録」を確認
- **ヘッダーのボタンで判定**:
  - 「GL突合」ボタンが表示されている → 受発注見込み入力画面
  - 「見込みへ昇格」ボタンが表示されている → 角度B案件入力画面
- **グリッドの列で判定**:
  - 「除外」「突合状態」列が表示されている → 受発注見込み入力画面
  - 「確度（%）」列が表示されている → 角度B案件入力画面

## 前提条件

- 利用者がログイン済みで、対象画面が開いている
- 入力するデータは新規データのみ（既存データの更新は対象外）
- データは利用者からプレーンテキストで提供される

## 画面構造

- **ページタイトル**: 「受発注見込み入力」または「角度B案件登録」
- **ヘッダー**: フィルタパネル（年度、月、プロジェクト）、検索ボタン、その他の機能ボタン
- **メインエリア**: Excel風のデータグリッド（編集可能なテーブル）

## データ入力フィールド（列の順序）

### 共通フィールド（両画面共通）

1. **プロジェクト** (必須)
   - タイプ: autocomplete（オートコンプリート）
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、ボタンをクリックして候補から選択
   - 表示形式: プロジェクト名（コードも表示される場合あり）

2. **取引先** (任意・入力不要)
   - タイプ: autocomplete
   - 入力方法: 入力不要（空欄のまま）
   - 注意: このフィールドは入力しなくてよい

3. **計上年月** (必須)
   - タイプ: autocomplete
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、ボタンをクリックして候補から選択
   - 表示形式: "YYYY-MM"形式（例: "2025-10"）
   - 選択肢: 会計年度（4月～翌年3月）の期間が表示される

4. **計上科目** (必須)
   - タイプ: autocomplete
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、ボタンをクリックして候補から選択
   - 表示形式: 計上科目名（例: "保守売上"、"ソフト売上"）
   - **重要**: 新規登録前にプロジェクトと計上科目で絞り込む必要がある（後述）

5. **摘要文** (必須)
   - タイプ: text（テキスト入力）
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、テキストを直接入力

6. **金額** (必須)
   - タイプ: number（数値入力）
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、数値を直接入力
   - 形式: 数値のみ（カンマ区切りなし）

7. **備考** (任意)
   - タイプ: text
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、テキストを直接入力

### 受発注見込み入力画面固有フィールド

8. **除外** (読み取り専用、操作不要)
   - タイプ: toggle（トグルスイッチ）
   - 操作: 新規データ入力時は操作不要
   - 注意: 角度B案件入力画面にはこのフィールドは存在しない

9. **突合状態** (読み取り専用、操作不要)
   - タイプ: button（ボタン）
   - 操作: 新規データ入力時は操作不要
   - 注意: 角度B案件入力画面にはこのフィールドは存在しない

### 角度B案件入力画面固有フィールド

8. **確度（%）** (必須)
   - タイプ: number（数値入力）
   - 入力方法: セルをクリックまたはフォーカスして、Enterキーで編集モードに入り、数値を直接入力
   - 形式: 0〜100の整数（例: 50、75、100）
   - 注意: 受発注見込み入力画面にはこのフィールドは存在しない

## 新規データ入力手順

### ステップ1: プロジェクトと計上科目での絞り込み（重要）

新規登録するデータが可視化しやすいように、事前にプロジェクトと計上科目で絞り込む。

#### 1-1. プロジェクトでの絞り込み

1. **プロジェクトフィルタを設定**
   - ヘッダー左側のフィルタパネル内の「プロジェクト」セレクトボックス（combobox）をクリック
   - 入力するデータに該当するプロジェクトを選択
   - 「全てのプロジェクト」を選択した場合は絞り込みなし

2. **フィルタの適用**
   - プロジェクトを選択すると自動的にフィルタが適用される
   - 選択したプロジェクトのデータのみが表示される

#### 1-2. 計上科目での絞り込み

1. **検索パネルを開く**
   - ヘッダー右側の「検索」ボタンをクリック
   - または、キーボードショートカット `Ctrl+F` を押す

2. **計上科目で絞り込む**
   - 検索パネル内の「計上科目」セレクトボックスをクリック
   - 入力するデータに該当する計上科目を選択
   - 例: 「保守売上」、「ソフト売上」、「商品売上」など

3. **検索を実行**
   - 検索パネル下部の「検索」ボタンをクリック
   - これにより、選択したプロジェクトと計上科目の両方に該当するデータのみが表示される

**注意**: プロジェクトと計上科目の両方で絞り込むことで、新規登録するデータが既存データと混在せず、入力しやすくなる。

### ステップ2: 新規行の追加

1. **新規行を追加**
   - キーボードショートカット `Ctrl+Shift+↓` を押す
   - または、グリッド内の任意のセルをフォーカスしてから `Ctrl+Shift+↓` を押す
   - 新規行が現在の行の直下に挿入される（アクティブセルがない場合は最下行に追加）

2. **新規行の確認**
   - 追加された行のIDは `temp-` で始まる
   - 行の左端に黄色の縦線が表示される（修正済みマーク）

### ステップ3: データ入力

新規行の各セルに順番にデータを入力する。

#### 入力順序（推奨）

**受発注見込み入力画面の場合**:

1. プロジェクト
2. 計上年月（取引先はスキップ）
3. 計上科目
4. 摘要文
5. 金額
6. 備考（任意）

**角度B案件入力画面の場合**:

1. プロジェクト
2. 計上年月（取引先はスキップ）
3. 計上科目
4. 摘要文
5. 金額
6. 確度（%）（必須）
7. 備考（任意）

#### セルへの移動方法

- **Tab**: 次のセルへ移動
- **Shift+Tab**: 前のセルへ移動
- **Enter**: 編集開始 / 確定して下のセルへ移動
- **矢印キー（↑↓←→）**: セル移動（編集モードでない場合）
- **Esc**: 編集キャンセル

#### 入力方法（フィールドタイプ別）

**autocomplete（プロジェクト、計上年月、計上科目）**

**重要**: autocompleteセルは、セルをクリックまたはフォーカスしただけでは編集できません。必ずEnterキーを押して編集モードに入る必要があります。

1. **セルをフォーカス**
   - セルをクリックするか、Tab/矢印キーでセルに移動
   - セルがアクティブになると、青いリング（ring）が表示される

2. **編集モードに入る**
   - **Enterキーを押す**（重要：これにより編集モードに入る）
   - 編集モードに入ると、セル内に「選択してください」というテキストと下向き矢印アイコン（ChevronsUpDown）が表示されたボタンが表示される

3. **候補リストを開く**
   - 表示されたボタンをクリックする
   - これにより、Popover（ポップオーバー）が開き、候補リストが表示される

4. **候補を検索・選択**
   - Popover内の検索フィールド（CommandInput）にテキストを入力して候補を絞り込む
   - または、候補リストをスクロールして目的の項目を探す
   - 候補は「コード ラベル」の形式で表示される（例: "001-SI-ASPIT SI-ASPIT"）

5. **候補を選択**
   - 目的の候補にマウスをホバーしてクリックする
   - または、矢印キー（↑↓）で候補を選択してEnterキーで確定する
   - 選択すると、Popoverが閉じ、セルの値が更新される

6. **次のセルへ移動**
   - 選択が確定すると、自動的に編集モードが終了する
   - TabキーまたはEnterキーで次のセルへ移動

#### プロジェクトの選択方法（具体例）

**入力データ**: "SI-ASPIT"

1. プロジェクトセルをフォーカス
2. Enterキーを押して編集モードに入る
3. ボタンをクリックしてPopoverを開く
4. 検索フィールドに「SI-ASPIT」または「ASPIT」と入力
5. 候補リストから「001-SI-ASPIT SI-ASPIT」を選択
6. 選択が確定すると、セルに「001-SI-ASPIT SI-ASPIT」と表示される

**注意**:

- プロジェクト名の一部（例: "ASPIT"）で検索できる
- コードの一部（例: "001"）でも検索できる
- 完全一致する場合は、検索フィールドに入力してEnterキーで確定できる場合もある

#### 計上年月の選択方法（具体例）

**入力データ**: "2026/2" または "2026年2月"

1. 計上年月セルをフォーカス
2. Enterキーを押して編集モードに入る
3. ボタンをクリックしてPopoverを開く
4. 検索フィールドに「2026年2月」または「2026-02」または「2月」と入力
5. 候補リストから「2026年2月」を選択
6. 選択が確定すると、セルに「2026年2月」と表示される

**注意**:

- 会計年度は4月～翌年3月（例: 2025年度は2025年4月～2026年3月）
- 表示形式は「YYYY年MM月」（例: "2026年2月"）
- 内部値は「YYYY-MM」形式（例: "2026-02"）
- 検索時は「2026年2月」「2026-02」「2月」などで検索できる
- 年度フィルタで選択した年度の会計年度の期間のみが候補として表示される

#### 計上科目の選択方法（具体例）

**入力データ**: "ソフト売上"

1. 計上科目セルをフォーカス
2. Enterキーを押して編集モードに入る
3. ボタンをクリックしてPopoverを開く
4. 検索フィールドに「ソフト売上」または「ソフト」と入力
5. 候補リストから「ソフト売上」を選択
6. 選択が確定すると、セルに「ソフト売上」と表示される

**注意**:

- 計上科目名の一部（例: "ソフト"）で検索できる
- 完全一致する場合は、検索フィールドに入力してEnterキーで確定できる場合もある
- 主な計上科目: 「保守売上」「ソフト売上」「商品売上」「外注加工費」など

**text（摘要文、備考）**

1. **セルをフォーカス**
   - セルをクリックするか、Tab/矢印キーでセルに移動

2. **編集モードに入る**
   - **Enterキーを押す**（重要：これにより編集モードに入る）
   - 編集モードに入ると、セル内にテキスト入力フィールドが表示される

3. **テキストを入力**
   - テキストを直接入力する
   - 入力中は、セル内にテキスト入力フィールドが表示され、カーソルが点滅する

4. **確定して次のセルへ移動**
   - Enterキーで確定して下のセルへ移動
   - またはTabキーで次のセルへ移動

#### 摘要文の入力例（具体例）

**入力データ**: "2月分売り上げ"

1. 摘要文セルをフォーカス
2. Enterキーを押して編集モードに入る
3. テキスト入力フィールドに「2月分売り上げ」と入力
4. EnterキーまたはTabキーで確定して次のセルへ移動

**注意**:

- テキストはそのまま入力する（変換不要）
- 日本語入力も可能
- 改行は入力できない（1行のみ）

**number（金額、確度）**

1. **セルをフォーカス**
   - セルをクリックするか、Tab/矢印キーでセルに移動

2. **編集モードに入る**
   - **Enterキーを押す**（重要：これにより編集モードに入る）
   - 編集モードに入ると、セル内に数値入力フィールドが表示される

3. **数値を入力**
   - 数値を直接入力する（カンマ区切りなし）
   - 入力中は、セル内に数値入力フィールドが表示され、カーソルが点滅する

4. **確定して次のセルへ移動**
   - Enterキーで確定して下のセルへ移動
   - またはTabキーで次のセルへ移動

#### 金額の入力例（具体例）

**入力データ**: "1500000" または "1,500,000"

1. 金額セルをフォーカス
2. Enterキーを押して編集モードに入る
3. 数値入力フィールドに「1500000」と入力（カンマは不要）
4. EnterキーまたはTabキーで確定して次のセルへ移動
5. 確定後、セルには「1,500,000」とカンマ区切りで表示される（表示のみ）

**注意**:

- 入力時はカンマ区切りなしで数値のみ入力する（例: "1500000"）
- カンマを含めて入力するとエラーになる可能性がある
- 確定後、表示は自動的にカンマ区切りでフォーマットされる
- 負の数値は入力できない（マイナス記号は入力不可）

#### 確度（%）の入力例（角度B案件入力画面のみ）

**入力データ**: "50" または "75" または "100"

1. 確度（%）セルをフォーカス
2. Enterキーを押して編集モードに入る
3. 数値入力フィールドに「50」と入力（0〜100の整数）
4. EnterキーまたはTabキーで確定して次のセルへ移動

**注意**:

- 確度は0〜100の範囲で入力する必要がある
- 整数のみ入力可能（小数点は入力不可）
- 範囲外の数値（例: 101、-1）を入力すると、保存時にエラーが表示される
- デフォルト値は50（新規行追加時は自動的に50が設定される場合がある）

**取引先フィールドのスキップ**

- 取引先セルに到達した場合は、`Tab` を押して次のセル（計上年月）へ移動
- 入力は不要

### ステップ4: データの保存

1. **保存を実行**
   - キーボードショートカット `Ctrl+Enter` を押す
   - これにより、すべての変更（新規追加・更新）が一括保存される

2. **保存結果の確認**
   - 保存成功時: トースト通知が表示される（「保存しました」）
   - 保存失敗時: エラーメッセージが表示される
   - バリデーションエラー時: エラーメッセージが表示される（必須項目未入力など）

### ステップ5: 複数データの入力

複数の新規データを入力する場合：

1. **1件目のデータ入力**
   - ステップ2～3を実行

2. **2件目以降のデータ入力**
   - 現在の行で `Ctrl+Shift+↓` を押して新規行を追加
   - または、最下行の最後のセルで `Tab` を押すと自動的に新規行が追加される場合がある
   - ステップ3を繰り返す

3. **一括保存**
   - すべてのデータ入力完了後、`Ctrl+Enter` で一括保存

## データ入力時の注意事項

### 必須項目

**共通（両画面共通）**:

- **プロジェクト**: 必ず入力（autocompleteから選択）
- **計上年月**: 必ず入力（autocompleteから選択）
- **計上科目**: 必ず入力（autocompleteから選択）
- **摘要文**: 必ず入力（テキスト）
- **金額**: 必ず入力（数値）

**角度B案件入力画面のみ**:

- **確度（%）**: 必ず入力（0〜100の整数）

### 任意項目

- **取引先**: 入力不要（空欄可）
- **備考**: 入力不要（空欄可）

### バリデーション

**共通（両画面共通）**:

- 金額は有効な数値である必要がある
- 必須項目が未入力の場合、保存時にエラーが表示される
- エラーメッセージには「行X: 必須項目を入力してください」と表示される

**角度B案件入力画面のみ**:

- 確度（%）は0〜100の範囲で入力する必要がある
- 範囲外の数値（例: 101、-1）を入力すると、保存時にエラーが表示される
- エラーメッセージには「行X: 確度は0〜100の範囲で入力してください」と表示される

### データ形式

#### 入力データの形式

**共通（両画面共通）**:

- **プロジェクト**: プロジェクト名またはコード（例: "SI-ASPIT"、"001-SI-ASPIT"）
- **計上年月**: 以下のいずれかの形式で提供される可能性がある
  - "YYYY/MM"形式（例: "2026/2"、"2026/02"）
  - "YYYY-MM"形式（例: "2026-02"）
  - "YYYY年MM月"形式（例: "2026年2月"）
- **計上科目**: 計上科目名（例: "ソフト売上"、"保守売上"）
- **摘要文**: テキスト（例: "2月分売り上げ"）
- **金額**: 数値（カンマ区切りあり/なし両方の可能性がある）
  - カンマ区切りあり（例: "1,500,000"）
  - カンマ区切りなし（例: "1500000"）

**角度B案件入力画面のみ**:

- **確度（%）**: 0〜100の整数（例: "50"、"75"、"100"）

#### システム内部の形式

- **計上年月**: "YYYY-MM"形式で保存される（例: "2026-02"）
- **計上年月表示**: "YYYY年MM月"形式で表示される（例: "2026年2月"）
- **金額**: 数値のみで保存される（カンマ区切りなし）
- **金額表示**: カンマ区切りで表示される（例: "1,500,000"）

#### データ形式の変換ルール

**計上年月の変換**:

- "2026/2" → "2026-02" → 候補リストで「2026年2月」を選択
- "2026/02" → "2026-02" → 候補リストで「2026年2月」を選択
- "2026-02" → 候補リストで「2026年2月」を選択
- "2026年2月" → 候補リストで「2026年2月」を選択

**金額の変換**:

- "1,500,000" → "1500000"（カンマを除去して入力）
- "1500000" → "1500000"（そのまま入力）

**確度（%）の変換**（角度B案件入力画面のみ）:

- "50" → "50"（そのまま入力）
- "75" → "75"（そのまま入力）
- "100" → "100"（そのまま入力）
- 小数点を含む値（例: "50.5"）は整数に変換する必要がある（例: "50"または"51"）

**注意**:

- 入力データの形式が異なる場合でも、上記の変換ルールに従って適切な形式に変換してから入力する
- 計上年月は、年度フィルタで選択した年度の会計年度の期間のみが候補として表示される

## キーボードショートカット一覧

### データ操作

- `Ctrl+Enter`: 一括保存
- `Ctrl+Shift+↓`: 行追加
- `Ctrl+Shift+D`: 行複製（既存行を複製して新規行を作成）
- `Ctrl+F`: 検索パネルを開く

### ナビゲーション

- `Tab`: 次のセルへ移動
- `Shift+Tab`: 前のセルへ移動
- `Enter`: 編集開始 / 確定して下へ移動
- `Esc`: 編集キャンセル
- `↑↓←→`: セル移動（編集モードでない場合）

### autocomplete操作

- `Enter`: 編集モードに入る（セルがフォーカスされている状態で）
- `↑↓`: 候補リスト内で候補を選択（Popoverが開いている状態で）
- `Enter`: 候補を確定（候補が選択されている状態で）

## エラーハンドリング

### 保存エラー時の対応

1. エラーメッセージを確認
2. 必須項目が未入力の場合は該当セルに移動して入力
3. 金額が無効な場合は数値形式を確認
4. 修正後、再度 `Ctrl+Enter` で保存

### 入力中のエラー

- セルに赤い背景が表示される場合は、入力値に問題がある可能性
- 行の左端に黄色の縦線が表示される場合は、修正済みマーク（正常）

### autocomplete操作時の注意

- セルをクリックしただけでは編集モードに入らない
- **必ずEnterキーを押して編集モードに入る必要がある**
- 編集モードに入ると、ボタンが表示される
- ボタンをクリックしないと候補リストが開かない

## データ入力例

### 入力データ例1（受発注見込み入力画面 - プレーンテキスト形式）

```
プロジェクト: SI-ASPIT
計上年月: 2026/2
計上科目: ソフト売上
摘要文: 2月分売り上げ
金額: 1500000
```

### 入力データ例2（受発注見込み入力画面 - CSV形式）

```
SI-ASPIT,2026/2,ソフト売上,2月分売り上げ,1500000
SI-ASPIT,2026/3,ソフト売上,3月分売り上げ,2500000
```

### 入力データ例3（角度B案件入力画面 - プレーンテキスト形式）

```
プロジェクト: SI-ASPIT
計上年月: 2026/2
計上科目: ソフト売上
摘要文: 2月分売り上げ見込み
金額: 1500000
確度: 75
```

### 入力データ例4（角度B案件入力画面 - CSV形式）

```
SI-ASPIT,2026/2,ソフト売上,2月分売り上げ見込み,1500000,75
SI-ASPIT,2026/3,ソフト売上,3月分売り上げ見込み,2500000,80
```

### 操作手順（受発注見込み入力画面 - 例1の場合）

#### 事前準備: フィルタ設定

1. ヘッダーのフィルタパネルで「年度」を「2025年度」に設定（2026年2月は2025年度の会計年度内）
2. ヘッダーのフィルタパネルで「プロジェクト」を「SI-ASPIT」または「001-SI-ASPIT SI-ASPIT」に設定
3. `Ctrl+F` で検索パネルを開く
4. 計上科目で「ソフト売上」を選択
5. 「検索」ボタンをクリック

#### データ入力（1行目）

6. `Ctrl+Shift+↓` で新規行を追加
7. **プロジェクトセル**: クリック → Enterキー → ボタンをクリック → 検索フィールドに「SI-ASPIT」または「ASPIT」と入力 → 「001-SI-ASPIT SI-ASPIT」を選択
8. **取引先セル**: Tabキーでスキップ（入力不要）
9. **計上年月セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「2026年2月」または「2026-02」または「2月」と入力 → 「2026年2月」を選択
10. **計上科目セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「ソフト売上」または「ソフト」と入力 → 「ソフト売上」を選択
11. **摘要文セル**: Tabキーで移動 → Enterキー → 「2月分売り上げ」と入力 → Enterキーで確定
12. **金額セル**: Tabキーで移動 → Enterキー → 「1500000」と入力（カンマなし） → Enterキーで確定
13. **備考セル**: Tabキーで移動（入力不要、または任意で入力）

#### データ入力（2行目）

14. `Ctrl+Shift+↓` で新規行を追加
15. **プロジェクトセル**: Enterキー → ボタンをクリック → 検索フィールドに「SI-ASPIT」と入力 → 「001-SI-ASPIT SI-ASPIT」を選択
16. **取引先セル**: Tabキーでスキップ
17. **計上年月セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「2026年3月」または「2026-03」または「3月」と入力 → 「2026年3月」を選択
18. **計上科目セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「ソフト売上」と入力 → 「ソフト売上」を選択
19. **摘要文セル**: Tabキーで移動 → Enterキー → 「3月分売り上げ」と入力 → Enterキーで確定
20. **金額セル**: Tabキーで移動 → Enterキー → 「2500000」と入力（カンマなし） → Enterキーで確定

#### 保存

21. `Ctrl+Enter` で一括保存
22. 保存成功のトースト通知を確認

### 操作手順（角度B案件入力画面 - 例3の場合）

#### 事前準備: フィルタ設定

1. ヘッダーのフィルタパネルで「年度」を「2025年度」に設定（2026年2月は2025年度の会計年度内）
2. ヘッダーのフィルタパネルで「プロジェクト」を「SI-ASPIT」または「001-SI-ASPIT SI-ASPIT」に設定
3. `Ctrl+F` で検索パネルを開く
4. 計上科目で「ソフト売上」を選択
5. 「検索」ボタンをクリック

#### データ入力（1行目）

6. `Ctrl+Shift+↓` で新規行を追加
7. **プロジェクトセル**: クリック → Enterキー → ボタンをクリック → 検索フィールドに「SI-ASPIT」または「ASPIT」と入力 → 「001-SI-ASPIT SI-ASPIT」を選択
8. **取引先セル**: Tabキーでスキップ（入力不要）
9. **計上年月セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「2026年2月」または「2026-02」または「2月」と入力 → 「2026年2月」を選択
10. **計上科目セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「ソフト売上」または「ソフト」と入力 → 「ソフト売上」を選択
11. **摘要文セル**: Tabキーで移動 → Enterキー → 「2月分売り上げ見込み」と入力 → Enterキーで確定
12. **金額セル**: Tabキーで移動 → Enterキー → 「1500000」と入力（カンマなし） → Enterキーで確定
13. **確度（%）セル**: Tabキーで移動 → Enterキー → 「75」と入力（0〜100の整数） → Enterキーで確定
14. **備考セル**: Tabキーで移動（入力不要、または任意で入力）

#### データ入力（2行目）

15. `Ctrl+Shift+↓` で新規行を追加
16. **プロジェクトセル**: Enterキー → ボタンをクリック → 検索フィールドに「SI-ASPIT」と入力 → 「001-SI-ASPIT SI-ASPIT」を選択
17. **取引先セル**: Tabキーでスキップ
18. **計上年月セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「2026年3月」または「2026-03」または「3月」と入力 → 「2026年3月」を選択
19. **計上科目セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに「ソフト売上」と入力 → 「ソフト売上」を選択
20. **摘要文セル**: Tabキーで移動 → Enterキー → 「3月分売り上げ見込み」と入力 → Enterキーで確定
21. **金額セル**: Tabキーで移動 → Enterキー → 「2500000」と入力（カンマなし） → Enterキーで確定
22. **確度（%）セル**: Tabキーで移動 → Enterキー → 「80」と入力（0〜100の整数） → Enterキーで確定

#### 保存

23. `Ctrl+Enter` で一括保存
24. 保存成功のトースト通知を確認

### CSV形式データの処理方法

**受発注見込み入力画面の場合**（例: "SI-ASPIT,2026/2,ソフト売上,2月分売り上げ,1500000"）：

1. **データの解析**
   - 各行を個別のデータとして処理する
   - カンマ区切りの各項目を以下のように解釈する：
     - 1列目: プロジェクト名（例: "SI-ASPIT"）
     - 2列目: 計上年月（例: "2026/2"）
     - 3列目: 計上科目名（例: "ソフト売上"）
     - 4列目: 摘要文（例: "2月分売り上げ"）
     - 5列目: 金額（例: "1500000" または "1,500,000"）

**角度B案件入力画面の場合**（例: "SI-ASPIT,2026/2,ソフト売上,2月分売り上げ見込み,1500000,75"）：

1. **データの解析**
   - 各行を個別のデータとして処理する
   - カンマ区切りの各項目を以下のように解釈する：
     - 1列目: プロジェクト名（例: "SI-ASPIT"）
     - 2列目: 計上年月（例: "2026/2"）
     - 3列目: 計上科目名（例: "ソフト売上"）
     - 4列目: 摘要文（例: "2月分売り上げ見込み"）
     - 5列目: 金額（例: "1500000" または "1,500,000"）
     - 6列目: 確度（%）（例: "75"）

2. **事前準備**
   - ヘッダーのフィルタパネルで「年度」を適切な年度に設定
   - ヘッダーのフィルタパネルで「プロジェクト」を1列目のプロジェクト名に設定
   - `Ctrl+F` で検索パネルを開き、計上科目で3列目の計上科目名を選択
   - 「検索」ボタンをクリック

3. **各行のデータ入力**
   - 各行について、以下の手順を繰り返す：
     a. `Ctrl+Shift+↓` で新規行を追加
     b. **プロジェクトセル**: Enterキー → ボタンをクリック → 検索フィールドに1列目のプロジェクト名を入力 → 候補を選択
     c. **取引先セル**: Tabキーでスキップ
     d. **計上年月セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに2列目の計上年月を変換して入力（"2026/2" → "2026年2月"） → 候補を選択
     e. **計上科目セル**: Tabキーで移動 → Enterキー → ボタンをクリック → 検索フィールドに3列目の計上科目名を入力 → 候補を選択
     f. **摘要文セル**: Tabキーで移動 → Enterキー → 4列目の摘要文を入力 → Enterキーで確定
     g. **金額セル**: Tabキーで移動 → Enterキー → 5列目の金額を入力（カンマを除去） → Enterキーで確定
     h. **確度（%）セル**（角度B案件入力画面のみ）: Tabキーで移動 → Enterキー → 6列目の確度を入力（0〜100の整数） → Enterキーで確定

4. **保存**
   - すべての行の入力が完了したら、`Ctrl+Enter` で一括保存

**注意**:

- 複数行のデータを入力する場合、各行ごとに新規行を追加する必要がある
- 同じプロジェクト・計上科目のデータを複数入力する場合、事前準備は1回だけ行えばよい

## 補足情報

### 画面の状態確認

**受発注見込み入力画面の場合**:

- ページタイトルが「受発注見込み入力」であることを確認
- ヘッダーにフィルタパネル（年度、月、プロジェクト）が表示されていることを確認
- ヘッダーに「GL突合」ボタンが表示されていることを確認
- メインエリアにデータグリッドが表示されていることを確認

**角度B案件入力画面の場合**:

- ページタイトルが「角度B案件登録」であることを確認
- ヘッダーにフィルタパネル（年度、月、プロジェクト）が表示されていることを確認
- ヘッダーに「見込みへ昇格」ボタンが表示されていることを確認
- メインエリアにデータグリッドが表示されていることを確認
- グリッドに「確度（%）」列が表示されていることを確認

### 新規行の識別

- 新規行のIDは `temp-` で始まる
- 新規行は行の左端に黄色の縦線が表示される（修正済みマーク）
- 保存後、新規行のIDはサーバーから返された正式なIDに置き換わる

### autocomplete操作の詳細

#### 編集モードの確認方法

- セルをクリックしただけでは編集モードに入らない
- セルがアクティブになると、青いリング（ring）が表示されるが、これはフォーカス状態
- **Enterキーを押すと編集モードに入り、ボタンが表示される**
- 編集モードに入ると、セル内に「選択してください」というテキストと下向き矢印アイコンが表示されたボタンが表示される

#### Popoverの操作

- ボタンをクリックすると、Popover（ポップオーバー）が開く
- Popover内には検索フィールドと候補リストが表示される
- 検索フィールドにテキストを入力すると、候補がリアルタイムで絞り込まれる
- 候補は「コード ラベル」の形式で表示される
- 候補をクリックするか、矢印キーで選択してEnterキーで確定する

#### 候補の検索方法

- Popover内の検索フィールドに、プロジェクト名、コード、計上科目名などの一部を入力する
- 入力すると、候補がリアルタイムで絞り込まれる
- 完全一致する場合は、直接Enterキーで確定できる場合もある

#### 候補の選択方法

- **マウス操作**: 候補にマウスをホバーしてクリック
- **キーボード操作**: 矢印キー（↑↓）で候補を選択してEnterキーで確定

### よくある問題と解決方法

#### 問題1: autocompleteセルで候補リストが開かない

- **原因**: 編集モードに入っていない
- **解決方法**: セルをクリックした後、**必ずEnterキーを押して編集モードに入る**
- **確認方法**: 編集モードに入ると、「選択してください」というテキストと下向き矢印アイコンが表示されたボタンが表示される

#### 問題2: 候補リストが表示されない

- **原因**: ボタンをクリックしていない
- **解決方法**: 編集モードに入った後、表示されたボタンをクリックする
- **確認方法**: ボタンをクリックすると、Popover（ポップオーバー）が開き、検索フィールドと候補リストが表示される

#### 問題3: 候補を選択できない

- **原因**: Popoverが開いていない、または候補が表示されていない
- **解決方法**: ボタンをクリックしてPopoverを開き、検索フィールドにテキストを入力して候補を絞り込む
- **具体例**: プロジェクト「SI-ASPIT」を探す場合、検索フィールドに「SI-ASPIT」または「ASPIT」と入力

#### 問題4: セルの値が更新されない

- **原因**: 候補を選択していない、または確定していない
- **解決方法**: 候補をクリックするか、矢印キーで選択してEnterキーで確定する
- **確認方法**: 選択が確定すると、Popoverが閉じ、セルの値が更新される

#### 問題5: プロジェクトが見つからない

- **原因**: プロジェクト名の検索方法が間違っている
- **解決方法**:
  - プロジェクト名の一部（例: "ASPIT"）で検索する
  - コードの一部（例: "001"）で検索する
  - 完全一致する場合は、検索フィールドに入力してEnterキーで確定する
- **具体例**: 「SI-ASPIT」を探す場合、「SI-ASPIT」「ASPIT」「001」などで検索できる

#### 問題6: 計上年月が見つからない

- **原因**: 計上年月の形式が間違っている、または年度フィルタが正しく設定されていない
- **解決方法**:
  - 年度フィルタで正しい年度を選択する（例: 2026年2月は2025年度の会計年度内）
  - 検索フィールドに「2026年2月」「2026-02」「2月」などで検索する
  - 会計年度は4月～翌年3月であることを確認する
- **具体例**: 「2026/2」を入力する場合、「2026年2月」または「2026-02」で検索する

#### 問題7: 計上科目が見つからない

- **原因**: 計上科目名の検索方法が間違っている
- **解決方法**:
  - 計上科目名の一部（例: "ソフト"）で検索する
  - 完全一致する場合は、検索フィールドに入力してEnterキーで確定する
- **具体例**: 「ソフト売上」を探す場合、「ソフト売上」「ソフト」などで検索できる

#### 問題8: 金額が入力できない

- **原因**: カンマ区切りで入力している、または数値以外の文字が含まれている
- **解決方法**:
  - カンマ区切りなしで数値のみ入力する（例: "1500000"）
  - カンマを含めて入力するとエラーになる可能性がある
- **注意**: 確定後、表示は自動的にカンマ区切りでフォーマットされる（表示のみ）

#### 問題10: 確度（%）が入力できない（角度B案件入力画面のみ）

- **原因**: 範囲外の数値を入力している、または小数点を含めて入力している
- **解決方法**:
  - 0〜100の範囲で整数のみ入力する（例: "50"、"75"、"100"）
  - 範囲外の数値（例: 101、-1）を入力するとエラーになる
  - 小数点を含めて入力するとエラーになる可能性がある
- **注意**: デフォルト値は50（新規行追加時は自動的に50が設定される場合がある）

#### 問題9: テキストフィールドに入力できない

- **原因**: 編集モードに入っていない
- **解決方法**: セルをクリックした後、**必ずEnterキーを押して編集モードに入る**
- **確認方法**: 編集モードに入ると、セル内にテキスト入力フィールドが表示され、カーソルが点滅する
